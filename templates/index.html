{% extends "base.html" %}

{% block title %}Ø®Ù„ÙŠ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„Ø¨Ø§Ù‚Ø© Ø¹Ù„ÙŠÙ†Ø§ ğŸ˜‰ - Ø§Ø´Ø­Ù† Ø±ØµÙŠØ¯Ùƒ Ø¨Ø£Ø±Ø®Øµ Ø³Ø¹Ø±{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12">
        <div class="card balance-card">
            <div class="card-body">
                <h2 class="card-title text-center mb-4 balance-title">Ø§ÙƒØªØ¨ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ù„ÙŠ Ø¹Ø§ÙŠØ²Ù‡</h2>
                <form id="balanceForm" method="POST">
                    <div class="form-group mb-4">
                        <label for="net_balance" class="form-label balance-label">Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„ØµØ§ÙÙŠ (Ø¨Ø§Ù„Ø¬Ù†ÙŠÙ‡):</label>
                        <input type="number" 
                               inputmode="numeric" 
                               pattern="[0-9]*" 
                               class="form-control balance-input" 
                               id="net_balance" 
                               name="net_balance" 
                               min="20" 
                               placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…Ø¨Ù„Øº (Ø£Ù‚Ù„ Ù…Ø¨Ù„Øº 20 Ø¬Ù†ÙŠÙ‡)"
                               required>
                        <small class="form-text balance-hint">Ø£Ù‚Ù„ Ø±ØµÙŠØ¯ Ù…Ù…ÙƒÙ† Ø´Ø­Ù†Ù‡ Ù‡Ùˆ 20 Ø¬Ù†ÙŠÙ‡</small>
                    </div>
                    <button type="submit" class="btn w-100 balance-button" id="calculateBtn">
                        <i class="bi bi-calculator me-2"></i>
                        Ø§Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±
                    </button>
                </form>
                
                <!-- Ù…ÙƒØ§Ù† Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ø³Ø§Ø¨ -->
                <div id="price-comparison-container"></div>
            </div>
        </div>
    </div>
</div>

<!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© -->
<div class="row mt-4">
    <div class="col-md-6">
        <div class="card" style="background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3);">
            <div class="card-body text-center">
                <i class="bi bi-shield-check" style="font-size: 2rem; color: #00ff88;"></i>
                <h5 class="mt-2" style="color: #00ff88;">Ø¢Ù…Ø§Ù† ÙˆØ«Ù‚Ø©</h5>
                <p style="color: #e0e0e0;">Ø®Ø¯Ù…Ø© Ù…ÙˆØ«ÙˆÙ‚Ø© ÙˆØ¢Ù…Ù†Ø© 100%</p>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card" style="background: rgba(0, 153, 255, 0.1); border: 1px solid rgba(0, 153, 255, 0.3);">
            <div class="card-body text-center">
                <i class="bi bi-lightning-charge" style="font-size: 2rem; color: #0099ff;"></i>
                <h5 class="mt-2" style="color: #0099ff;">Ø³Ø±Ø¹Ø© ÙÙŠ Ø§Ù„ØªÙ†ÙÙŠØ°</h5>
                <p style="color: #e0e0e0;">Ø´Ø­Ù† ÙÙˆØ±ÙŠ Ø®Ù„Ø§Ù„ Ø¯Ù‚Ø§Ø¦Ù‚</p>
            </div>
        </div>
    </div>
</div>



<!-- Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø³Ø§Ø¨Ù‚Ø© -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card" style="background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);">
            <div class="card-header" style="background: rgba(0, 255, 136, 0.1); border-bottom: 1px solid rgba(0, 255, 136, 0.3);">
                <h5 class="mb-0" style="color: #00ff88;">
                    <i class="bi bi-check-circle-fill me-2"></i>
                    Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø³Ø§Ø¨Ù‚Ø©
                </h5>
            </div>
            <div class="card-body">
                <div class="carousel-container">
                    <div class="testimonials-carousel">

                    <!-- Ù†Ø³Ø® Ù…ÙƒØ±Ø±Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Ø¢Ø®Ø± 3 ØµÙˆØ±) -->
                    <div class="testimonial-slide clone">
                        <img src="{{ url_for('static', filename='images/4.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 4" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide clone">
                        <img src="{{ url_for('static', filename='images/5.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 5" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide clone">
                        <img src="{{ url_for('static', filename='images/6.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 6" class="testimonial-img">
                    </div>

                    <!-- Ø§Ù„ØµÙˆØ± Ø§Ù„Ø£ØµÙ„ÙŠØ© -->
                    <div class="testimonial-slide original">
                        <img src="{{ url_for('static', filename='images/1.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 1" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide original">
                        <img src="{{ url_for('static', filename='images/2.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 2" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide original">
                        <img src="{{ url_for('static', filename='images/3.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 3" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide original">
                        <img src="{{ url_for('static', filename='images/4.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 4" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide original">
                        <img src="{{ url_for('static', filename='images/5.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 5" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide original">
                        <img src="{{ url_for('static', filename='images/6.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 6" class="testimonial-img">
                    </div>

                    <!-- Ù†Ø³Ø® Ù…ÙƒØ±Ø±Ø© ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ© (Ø£ÙˆÙ„ 3 ØµÙˆØ±) -->
                    <div class="testimonial-slide clone">
                        <img src="{{ url_for('static', filename='images/1.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 1" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide clone">
                        <img src="{{ url_for('static', filename='images/2.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 2" class="testimonial-img">
                    </div>
                    <div class="testimonial-slide clone">
                        <img src="{{ url_for('static', filename='images/3.jpg') }}" alt="Ù…Ø¹Ø§Ù…Ù„Ø© Ø¹Ù…ÙŠÙ„ 3" class="testimonial-img">
                    </div>

                </div>
                </div>




            </div>
        </div>
    </div>
</div>



{% endblock %}

{% block extra_css %}
<style>
/* Ø²ÙŠØ§Ø¯Ø© Ø­Ø¬Ù… Ø§Ù„Ø²ÙˆÙ… Ø¥Ù„Ù‰ 85% */
body {
    zoom: 0.85;
}

/* Ø£Ù†Ù…Ø§Ø· Ø¥Ø¶Ø§ÙÙŠØ© Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
.price-comparison {
    margin-top: 30px;
    padding: 25px;
    background: linear-gradient(145deg, #2a2a2a 0%, #1e1e1e 50%, #2a2a2a 100%);
    border-radius: 20px;
    border: 2px solid rgba(0, 255, 136, 0.3);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
    position: relative;
    overflow: hidden;
}

.price-comparison::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(0, 255, 136, 0.8), transparent);
}

.price-comparison h3 {
    color: #ffffff;
    text-align: center;
    margin-bottom: 25px;
    font-size: 24px;
    font-weight: 700;
    text-shadow: 0 0 15px rgba(0, 255, 136, 0.5);
}

.price-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    margin-bottom: 15px;
    background: rgba(0, 0, 0, 0.3);
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    transition: all 0.3s ease;
}

.price-item:hover {
    background: rgba(0, 0, 0, 0.5);
    transform: translateX(-5px);
}

.price-item.highlight {
    background: rgba(0, 255, 136, 0.1);
    border: 2px solid rgba(0, 255, 136, 0.3);
    box-shadow: 0 5px 15px rgba(0, 255, 136, 0.2);
}

.price-label {
    font-size: 18px;
    color: #e0e0e0;
    font-weight: 600;
}

.price-value {
    font-size: 20px;
    font-weight: bold;
    color: #00ff88;
    text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
}

.telegram-contact {
    margin-top: 25px;
    padding: 25px;
    background: linear-gradient(145deg, #1e1e1e 0%, #2a2a2a 50%, #1e1e1e 100%);
    border-radius: 20px;
    border: 2px solid rgba(0, 153, 255, 0.3);
    box-shadow: 0 15px 35px rgba(0, 0, 0, 0.6);
    text-align: center;
}

.contact-header {
    margin-bottom: 20px;
}

.contact-header i {
    font-size: 3rem;
    color: #0088cc;
    margin-bottom: 10px;
}

.contact-header h4 {
    color: #ffffff;
    font-size: 22px;
    font-weight: 700;
}

.telegram-btn {
    display: inline-block;
    padding: 15px 30px;
    background: linear-gradient(135deg, #0088cc 0%, #0066aa 100%);
    color: white;
    text-decoration: none;
    border-radius: 25px;
    font-size: 18px;
    font-weight: 700;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(0, 136, 204, 0.3);
    margin: 10px 0;
}

.telegram-btn:hover {
    background: linear-gradient(135deg, #0099dd 0%, #0077bb 100%);
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(0, 136, 204, 0.5);
    color: white;
    text-decoration: none;
}

.whatsapp-btn {
    display: inline-block;
    padding: 15px 30px;
    background: linear-gradient(135deg, #25D366 0%, #128C7E 100%);
    color: white;
    text-decoration: none;
    border-radius: 25px;
    font-size: 18px;
    font-weight: 700;
    transition: all 0.3s ease;
    box-shadow: 0 8px 25px rgba(37, 211, 102, 0.3);
    margin: 10px 0;
}

.whatsapp-btn:hover {
    background: linear-gradient(135deg, #2EE374 0%, #1BA55C 100%);
    transform: translateY(-3px);
    box-shadow: 0 12px 35px rgba(37, 211, 102, 0.5);
    color: white;
    text-decoration: none;
}

.contact-note {
    color: #b0b0b0;
    font-size: 16px;
    margin-top: 15px;
}

/* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø£ÙƒÙˆØ±Ø¯ÙŠÙˆÙ† */
.accordion-button:not(.collapsed) {
    background: rgba(0, 255, 136, 0.2) !important;
    color: #ffffff !important;
}

.accordion-button:focus {
    box-shadow: 0 0 0 0.25rem rgba(0, 255, 136, 0.25);
}

/* container Ù„Ù„Ù€ carousel */
.carousel-container {
    width: 100%;
    overflow: hidden;
    position: relative;
    height: 400px; /* Ø§Ø±ØªÙØ§Ø¹ Ø£Ù‚Ù„ */
}


</style>
{% endblock %}

{% block extra_js %}
<script>

    // Carousel ØªÙ„Ù‚Ø§Ø¦ÙŠ
    let currentSlideIndex = 3; // Ù†Ø¨Ø¯Ø£ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø±Ø§Ø¨Ø¹Ø© (Ø£ÙˆÙ„ ØµÙˆØ±Ø© Ø£ØµÙ„ÙŠØ©)
    let autoSlideInterval;

    function updateIndicators() {
        // Ù…ÙÙŠØ´ indicators Ø¯Ù„ÙˆÙ‚ØªÙŠ
        console.log('Current slide:', currentSlideIndex);
    }

    function goToSlide(slideIndex) {
        const carousel = document.querySelector('.testimonials-carousel');
        const slides = document.querySelectorAll('.testimonial-slide');

        if (!carousel || slides.length === 0) return;

        currentSlideIndex = slideIndex;

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¹Ø±Ø¶ Ø§Ù„ØµÙˆØ±Ø© + Ø§Ù„Ù…Ø³Ø§ÙØ©
        // Ù„Ù„Ø¯ÙŠØ³ÙƒØªÙˆØ¨: 300px + 20px = 320px
        // Ù„Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„: 250px + 20px = 270px
        const isMobile = window.innerWidth <= 768;
        const slideWidth = isMobile ? 270 : 320;
        const translateX = currentSlideIndex * slideWidth;

        console.log('Moving to slide:', currentSlideIndex, 'TranslateX:', translateX, 'Mobile:', isMobile);

        // Ø§Ø³ØªØ®Ø¯Ø§Ù… transform Ù„Ù„ØªØ­Ø±ÙŠÙƒ
        carousel.style.transition = 'transform 0.5s ease';
        carousel.style.transform = `translateX(-${translateX}px)`;

        console.log('Transform applied:', `translateX(-${translateX}px)`);

        updateIndicators();
    }



    function startAutoSlide() {
        const carousel = document.querySelector('.testimonials-carousel');
        const allSlides = document.querySelectorAll('.testimonial-slide');
        const originalSlides = document.querySelectorAll('.testimonial-slide.original');

        if (!carousel || allSlides.length === 0) {
            console.log('Auto slide failed - no carousel or slides');
            return;
        }

        console.log('Starting infinite auto slide with', allSlides.length, 'total slides,', originalSlides.length, 'original slides');

        autoSlideInterval = setInterval(() => {
            currentSlideIndex++;

            // Ù„Ù…Ø§ Ù†ÙˆØµÙ„ Ù„Ø¢Ø®Ø± ØµÙˆØ±Ø© Ù…ÙƒØ±Ø±Ø© ÙÙŠ Ø§Ù„Ù†Ù‡Ø§ÙŠØ©ØŒ Ù†Ø±Ø¬Ø¹ Ù„Ù„ØµÙˆØ± Ø§Ù„Ù…ÙƒØ±Ø±Ø© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
            if (currentSlideIndex >= allSlides.length - 3) {
                console.log('Reached end clones, jumping to start clones');

                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
                carousel.style.transition = 'none';
                currentSlideIndex = 3; // Ù†Ø±Ø¬Ø¹ Ù„Ø£ÙˆÙ„ ØµÙˆØ±Ø© Ø£ØµÙ„ÙŠØ©

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙÙˆØ±Ø§Ù‹
                const isMobile = window.innerWidth <= 768;
                const slideWidth = isMobile ? 270 : 320;
                const translateX = currentSlideIndex * slideWidth;
                carousel.style.transform = `translateX(-${translateX}px)`;

                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ù†ÙŠÙ…ÙŠØ´Ù†
                setTimeout(() => {
                    carousel.style.transition = 'transform 0.5s ease';
                }, 50);

                updateIndicators();
                return;
            }

            console.log('Auto slide moving to:', currentSlideIndex);
            goToSlide(currentSlideIndex);
        }, 3000); // ØªØºÙŠÙŠØ± ÙƒÙ„ 3 Ø«ÙˆØ§Ù†ÙŠ

        console.log('Auto slide interval started');
    }



    // Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Auto carousel and modal loaded');

        const carousel = document.querySelector('.testimonials-carousel');

        if (carousel) {
            // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆØ¶Ø¹ Ø§Ù„Ø§Ø¨ØªØ¯Ø§Ø¦ÙŠ (Ø£ÙˆÙ„ ØµÙˆØ±Ø© Ø£ØµÙ„ÙŠØ©)
            const isMobile = window.innerWidth <= 768;
            const slideWidth = isMobile ? 270 : 320;
            const initialTranslateX = currentSlideIndex * slideWidth;
            carousel.style.transform = `translateX(-${initialTranslateX}px)`;
            console.log('Initial position set to slide:', currentSlideIndex);

            // Ø§Ù†ØªØ¸Ø§Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙˆØ± Ø«Ù… Ø¨Ø¯Ø¡ Ø§Ù„ØªØ­Ø±ÙŠÙƒ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
            setTimeout(() => {
                startAutoSlide();
                console.log('Auto carousel started after delay');
            }, 1000);



            console.log('Carousel events attached');
        }

        // Ù…ÙÙŠØ´ indicators Ø¯Ù„ÙˆÙ‚ØªÙŠ



        // Debug info
        console.log('Carousel element:', carousel);
        console.log('Slides found:', document.querySelectorAll('.testimonial-slide').length);
    });
</script>
{% endblock %}
